Transcription: 20 years ago Bill Joy talked about the eight fallacies of distributed computing these are things such as the network is reliable and latency is 0 and bandwidth is infinite and these policies are even more relevant today with the popularity of Docker containers and the networks of distributed systems that we deal with things have become even more complex in the fallacies keep coming up there still relevant and with this growing complexity comes new problems and new fallacies weaveworks is a company building a simple reliable ways to manage containers and microservices the CEO of weaveworks Alexis Richardson joins the show today to discuss how we use is convergent replicated data types to manage distributed systems the use of the crdt data structure is in contrast to the use of algorithmically managed paxos or raft based distributed
some strategies our conversation also touches on the cloud native Computing Foundation which is similar to the Apache Foundation but for cloud native application Technologies Chopper injury daily is looking for sponsors for Q3 if you're interested in having your company sponsor software engineering daily please send me an email at software engineer daily at gmail.com and if you enjoy the show always I appreciate it we share it on Facebook or Twitter show grows by word of mouth so you can also just send me an email to give me some feedback or say hi I always love hearing people who listen to the show after a message from today sponsored we will get to this episode we works with Alexis Richardson
as an engineer you want to minimize scalability issues when there is high traffic to your application you need your content delivered with 100% availability cash what is the content delivery network with the fastest Global throughput every application needs a CDN whether you are in gaming or add tack or social networking or e-commerce if you're at scale you need a c d n Go to cash wise.com that's c a c h e f l y. Calm and use promo code SE daily for a 14-day to Terry be free trial 65% of cash why customers use cash flight for software distribution because cash has the fastest throughput globally for large files try out cash flight for free today is a 14-day free trial up to 2tb bandwidth and if you use
who's promo code SE daily you can help support software engineering daily if you want your app to be successful can't have delays in downtime so check out cash fly c a c h e f l y calm and use promo code SE daily for a discount would support the show now let's get on with the show and thanks to cash fly for being the newest sponsor of software engineering daily
Alexis Richardson is the co-founder of weaveworks Alexis welcome to software engineering daily allows us to build a resilient network of containers and we will get into that discussion but I want to start by talking more generally just about distributed systems in general what are the characteristics of a reliable production distributed system I think there's a lots of different definitions of reliable but I think that the most important is that when I use a wishes to execute an action that I action is what is possible and if it fails to complete it should do so in amount of that makes sense of the user Bill Joy was talking about the eight fallacies of distributed computing and these are things like the network is reliable latency is zero band with his infant there another five or six policies and these policies are still relevant today
are there any new fallacies of distributed computing that has become widely believed in recent years question I mean I see the Mets never really go away they keep coming back and do full missed my favorite today but I think it's really crucial is this idea but
 alone about the caissons can be built by selecting a some kind of platform whether it's that container platform Aura Cloud I'm contain a platform or a pause and then everything will be kind of be taken care of for you by this Trap full and you just have to write the application and it will figure out how to deal with the hot purpose of distributed computing for you that is kind of a 8 minutes in the Box level I promise it's just not true and that is why so many applications continue to be written using infrastructure and services rather than a I created set up TracFone components out of the boss for a while until at least until the point where people start building different types of application an old bill the same kind of applications like the weather for something maybe then it'll be yes and that ice but today I think it's a tree
 policies in a box platform answer there's also this this thing I think we talk about tools that are useful for managing distributed State we have these things like a CD and console and zookeeper and all of these tools use a consensus algorithm like paxus or raft and they have strong consistency guarantees I think we've you know the overtime we've kind of talk got gun used to these things as being having a tight mapping to how we think about distributed systems are there some pros and cons of this this model of distributed State Management Systems where were using at CD and console in Zookeeper and have these stronger guarantees about consistency
 absolutely there are pros and cons and if you have been doing Computing for a while we are in the consensus algorithm era very much recapitulates the fascination with distributed transactions that took place in the 1990s Which Way introduce does a mechanism for delivering a certain kind of reliability for a logical system distributed system and which you know you got people in trouble because it annoys understand when to use them and how to use them people would people would end up using mold a time or not at all it's not about sorry which is which is not a good thing using them all the time is a very bad thing because you know you have. And people walking away from the transaction which then have to be dealt with I know using the Metabo can be back there sometimes you do need strong consistency and then the move to consensus-based I wear them sis definitely
 things and it one thing I would say to people is you know. It's right to own consensus-based algorithm the invitations of taxes and Roth that are out back I'll good zookeeper at CD console respectively the Praxis rough draft and there are other things out that too was it good solutions for petites for doing consensus is not a good idea to implement your own alright you know Leo Lee invent the algorithm
 be there is a high-performance penalty to getting consensus among a large number of you know that's a free Elmo actors on a network it which is too high to pay inside every single transaction I'm so what we find is that you know it's not a good idea to use consensus all the time and then you have to decide when not to use consensus and embarrassing things other things that can go wrong when using consensus all the time for example in order to maintain consistency if there was a network partition then typically a site that is in Corridor of the subsystem that is incorrect will deny reads all rights on the process that use in order to maintain consistency when they when the two partitions reconnect
 and another approach to this which is the one that you know we favor and is used to use buy things like Global DNS actually eye disease by Amazon for S3 and I'm any of the large scale systems is an eventually consistent model I'm not something that we use Inside Out Network and I'll set his Discovery 2 on the advantage of this is you know it's partition tolerance it gives the use of available access all the time on it so it sounds inconsistencies using a much by System of a standstill titi's and rat this solves the problem of consensus management by a data structure Centric approach the taxes and Raptors like this algorithmic approach to the constantly getting a quorum around the state of your data and with crdt is your more instead of involving everybody in the network and trying to get the score on you
 Travis data structure that you tried of the you try to maintain and propagate throughout the network overtime and that did structure is the crdt this conversion replicated data type could you give a simple example for how a crdt works
 I'm probably not the right person sound so this question it works I mean you know if you'll accept a hand-waving know quite right on Sir actually say very good in that case we're good to go it works like it up I mean you know everybody and she was of the understands that they get hot model as one which supports multiple Russian currency I did enables marriages if they take place on Independent pieces of code so it's quite difficult to get inconsistent Motors in a large-scale system on get out if you have a small number of different things and you don't see how to use a based on this the same idea that you can bring together two different sets of changes on a common set of data provide even if they're on the same thing then there is a set of rules you can follow which will help heat which will help you out
 so now that we have some background into the you're the way that we've looks at distribute systems let's talk some about the weave products and I think one simple place to start is we DNS could you explain what a DNS service does and what we've DNS does that's different Show solar system for handling these distributed systems event in and eventually consistent way and I should stress before I took about DNS that you know when two people to use consensus a toll with science people in the cases where you don't need consensus has a really good tool to use which will give you the level of consistency that you need it most cases celebrities consensus all the time you don't need a good developer should never have just one box okay
 when she is consensus and strong consistency else else in another case will come to you in a minute now we've DNS is a set of Discovery tool it all it does is it maintains a very first distributed set all of Santa's names I'm using a DNS API to Corydon across the system which means that everybody who is using we've met once that Apple that contain has been gone Starkey addresses can give him a service name in a intuitive way without having to learn any new technology that is more than enough for a lot of service Discovery cases the difference between this and regular DNS is regular DNS is some English up it's very slowly it's that is for the global internet you know we've optimize their implementation said it suitable for sinus Discovery cases
 the one thing to bear in mind is that if you're using a DNS by system for self-discovery you want to make sure that the IP addresses are assistance by which I mean that they you know if you got some IP address back from DNS as the service address that you can keep on using their IP address otherwise you have to make it look up every time so we solve that problem music using all the techniques but at that it's root weave DNS is a fast high-performance optimize DNS system which is highly was in it cuz it's based on weight max witches and eventually consistent model
 is there something about DNS and service discovery that has fundamentally changed since containers have started becoming popular and in wide use
 does a lot of confusion about the stuff I mean number one this confusion about what do you need to have a strong and consistent but whole number to does a lot of people kind of ugly use these tools for things but I think that other than that you know actually what was sitting with containers and it's been said before by others is a move part to the computer models of the cost of in a good way so I can stay know you were sent to be dealing with the machine it's just it's just a kind of pool table kind of bushel machine and you know what you want to do is deal with setting up by machine in as simple as possible to change machines like that works in storage instead of Discovery in all of those good things and you know that means that what you don't need to worry about is a whole lot of other kind of stuff that was invented lighter in the air of job
 some type of machines about in a jvm 1080i to send transaction Mobile's little which is great that you actually don't need it for another a lot of applications so I'm yeah we've DNS is just one component of what we've works the company that you cook on it is working on so now that listeners kind of idea that you're working on explain what we've is with what is your company weaveworks doing
 reflexes essentially delivering a complete stock for people who want to build Microsoft Office applications focusing on solving problems independent of the choice of container and the choice of orchestration 2
 what are the main products that we works is building to achieve this goal of allowing it basically anybody to to build microservices building a complete tool chain for Microsoft Office is designed for developers developers developers teams who want to build Microsoft was very quickly and have help from the too late to make tuna able to do that pounds like in a blue green Canary tracing flight management segmentation and so on
 and it all to link the key idea is that you know with no telling you which container to use when not telling you which will go straight to to use so we are focusing on working with the grain of Docker kubernetes dcos for mesosphere and other than other tools like Amazon DCS for example I'm in our approach you know you it's it's very much too so that the way that technology is the sign that we could do this and you choose your platform and in many cases you were going to have multiple platforms as one might be a mesosphere one might be a Cuban Eddie's when you talk and you can if you can build applications are not in a sauce the simple remote consistent Manner and still run them all these platforms which is I think very beneficial to accuses he won't help me slept about two occasions and that breaks down into you know Kiara's a function of a sudden you see those in Arkansas Products like weed Skype for example it should say monitoring and visualization tool we've met
 Michigan CU networking and Subs Discovery and saw him so let's talk about Weeping at in more detail and we've met create a virtual Network that connects Docker containers together so why do I need this like I thought this is something that is covered by kubernetes or or meso spear I'm sorry May so sore ECS I thought that these container orchestration systems took care of this thing why do I need weed net to create a virtual Network between my Docker containers
 yeah absolutely I'm in this is a great question we've not should be used with other platforms because it delivers that's in that what came into use cases of sometimes for example when you get a feature that we've not provides but isn't provided by many many problems and that works I'm one of the ones that we keep running into today is for example Nolte cost multi cost that does not work easily in Cloud Apartments usually have to synthesize it yourself and we've been able to do that in bed that into we have not so that if you have a multicolored space application easy for the discovery instrumentation or Market dates or if you're in finance then we can I will take care of it what about one of our largest customers the international Securities Exchange a big is trading exchange out of New York I'm not part of an s that actually uses it to distribute that market data onto Amazon Cloud on into up external data sent to the bay run
 because we've met enable multicast out of the box and make it run their existing technology I believe that in a way that it was just easier and I'm so hot for months whatever everything else they tried suicide the one on situation is there was some things that we do that other people just starting to add another one is having control over the network yourself is that contagious and that's when you want to use it instead of whatever the problem is driving and it's different in weave net door and weave that are there different India the platforms themselves one way I think baby connects back to the previous conversation we had about crdt is that all the other Docker networking plugins require setting up this Central database like console or zookeeper how does weave net contrast with this
 so with weave not because the consistency model is Bates into the product itself through and eventually consistent Pioneer is it in Mash you don't need to set up an external store to get to look after all your message I turn the network why is it some other networks on platform Network implementations they do things like putting older than that my message I tried to that CD which means that freaks on PlayStation Network partition in the case of Dhaka there is no reads and writes on the menorah to side which means in 10. Net worth it was completely freeze up and no one will know what's going on but she said essentially an unreliable solution now infantis to the implemented no doubt they'll think of ways to solve this problem later they're focusing on a multicouples center at the beginning where politicians will be very rare fair enough I don't do that do not object to that but I do think that it's
 bearing in mind that it's much better to have a single thing that could go wrong and to have two or more things that could go wrong and I think that's the fundamental difference between we've met many of the networking implementations that deal see out there and if you're if you're by Aurora or if you want technology decision make her one of the top questions you should ask the vendor is how do you deal with this United waps if things go wrong and cut can I get cold out in this way
 I had a crazy idea couple weeks ago it's a photo sharing app that only has pictures of cats when I finish my photo sharing Cat application I will be deploying it to lymph node because Leonard is the fastest hosted Lennox provider I don't want to get locked into a proprietary platform it's going to overcharge me as soon as my app gets popular I just want a fast Linux server with simple pricing go to lenovo.com SE daily and get $20 in free credit today plans start at $10 a month so my free $20 will be plenty to watch my cat photo sharing app once I need to scale I can use tools like an ode balancers and backups and Lynyrd has built-in dashboard King in metrics so that I can see the traffic to my linode servers and I can understand how many of my users are posting cat pictures and looking at each other's cat pictures go to a note
 kaam SE daily and get $20 in free credit today if the plans start at $10 a month such a great deal thanks to a note for sponsoring a software engineering Daily Now what's going on to this episode
 conversation that I see around the weave net product is that like today most of you know if I've got some containers stack probably all of my containers are in kubernetes running on Google compute cloud or all of them are in Mesa is running on Amazon or they're on ECS running on Amazon and they're all in this box but tomorrow I may want to have some of my containers and kubernetes some of them on ECS some of them anime shows and my senses that we've met is going to be this communication layer that is reliable that is the the best choice to use to communicate between containers on these different platforms
 yes I mean I think that's when I said earlier that we're offering a complete tool chain for Microsoft Office is independence of the choice of old stretch at what we have in mind as customers who might for example of using how many CCs for their arms and face Tops kubernetes on ec2 or somewhere else for other reasons than a swimming and many many many cases cuz it's good to look well I'm so what happens if you want these applications to communicate wouldn't it be great if you had it I the one consistent approach to networking or if they would even on one network which could stretch across for example multiple data centers security and we've met does that which makes it basically an Olsen tool that those cases and say that was the other reason I was going to idea with the white why is we've met that one is a a specific functionality it supports and the other is it's it's just really amazing and flexible and simple and easy in these kind of cases that you might care about down the road
 macro picture we have kubernetes and Mason Amazon ECS Docker swarm the list goes on for these platforms that are trying to be the thing that you build all of your infrastructure on and I love to ask guests what their perspective is how the service is actually differ from one another and like is the future what is the future look like so give me your perspective like why are these why are there all these platforms it seems like there's like a significantly overlapping functionality
 right man this is a really interesting question I think this kind of got to the horses of questions people should be asking about the industry as a whole it's all very well differentiating on stitches but but candidly and frankly be typical user is not going to care about that I care about the chloride descent 2 features being implemented well and diced peaches will be the same on each of the main platforms now they might be implanted in different ways and it might be advantageous to you two doing the one way or another way across the development of operation Spectrum no question about that when it comes down to the cool features will be United starting and stopping multiple containers maintaining and replicas that kind of thing and you know it's going to be essentially unemployed, mobile across these platforms and that will be the most applications use so actually you know you shouldn't shouldn't be taking this as part of his furniture and Eli are and I think that's what's up
 they going to have to post that Corey gets out of functionality will will come out at eyes and that for tell somebody to people who make the most money out of it will be people who cannot build a child's type Revenue stream out of it which will be number one and number two I wish them luck with this companies like Duck the mesosphere and Dustin of the Cuban of these plants may be able to do this
 Commodities like for I think about Commodities markets I think about the oil market and one interesting thing about the oil Market is that it is this commodity but actually it's a commodity Market where there are all these different players that have slightly differentiated offerings because the market is so gigantic and it does have specific needs like a different different users have different specific needs of the types of oil but they want like at what level of refinement they want is this going to really be a winner-take-all market where in there's there's one commodity provider that that it just wins everything or is it going to be where like some people some people want because of very real and tangible reasons that may or may not be visible right now
 right so I'm not sure if saying that DC Oso mesosphere mesos saw it the same as Cuban Eddie's in and swollen is quite the right way to look at it okay my fault I mean I was doing that to a later on I think there were things like Marathon which sit on top of PCOS so I'll switch
 yeah which more like the housekeeping at ease in the restoration another thing messes fundamental Design Center is a little bit lower down to stock the on the less you know in in the lodge season trying to do some of the things I think the market is going to sustain at least two possibly three different Technologies here I'm just in you know come out at Sea open source infrastructure just because they're all different scaling issues that you run into that you want Altimas for different ways and if you talk to the messiest teams they will very much talk about so that you know that that kind of thing that drives them is very large scale data-driven application so I was I think you know what drives. Don't take him out of the past well then it started up with applications that are passed out applications against generalize since then I need a Cuban Eddie's as a mixture of the two cuz that's what you have in Google state of senses and that's why I keep
 what is original design come from as well very very different places and I think they could all end up doing the same thing or they could specialize and I honestly wouldn't want to predict what will happen that and I said he's in his room for multiple implementations based on different special cases and then strengths and weaknesses no question absolutely you were willing to make that I heard in a podcast interview and this is a really interesting point in the podcast is the cloud cast for people who are curious it's a great podcast and on this podcast you drew an analogy between Docker the company doctor their business strategy and how vmware's business has evolve and I thought this is really interesting I haven't heard anybody else to draw this parallel before could you explain the parallel between how what will how you see Docker the company evolving it how VMware currently looks today how their business model has evolved
 one of the great things about making predictions about future is that you can make just once every time people ask me these questions
 and I think you know it's worth bearing in mind that the market allowed VMware to create a monopoly in the latest Sunset which was unexpected because the one virtualization was first created in the 90s as I get was at The Rebirth of atomization let the level of commodity Computing you know Mom and Pop's desktop or the small business Data Center and BMI proved everybody totally wrong and it took the rest of the Navy Amanda. Wood stove Century 80% of the mainstream Enterprise workloads in the Datacenter. Is it looks cool a Stranglehold it became very frustrating for everybody else who wants it to bring it wants to invite some not laugh because they would have to use BMI as AP eyes and technology and some people try to do things like using KVM was then and ultimately Amazon
 sample you know use that I cancel Special Machine and folktek you know Microsoft took a long time getting high Kavita knock it and then bill as you're on top of that I believe believe that maybe not quite right
 so nobody wants that to happen again and what you could say you could argue that the attempt to remove the BMI of a monopoly through Arkansas specialization failed but the attempt to remove the VMI Monopoly through a different approach to componentization in automation I'm a general problem true containers will succeed because there are enough benefits to switching technologies that was always the problem is if I get rid of the end of The Addams how to switch to night insults p.m. what what are the reasons I should do that they would never it was never enough reason to change you know even if they open source technology a chief party many customers wouldn't be ready to change it would require effort to what risk Aberdeen to containerization has material benefits times of portability across different implementations of Charlton BMS and capacity management so you can
 I'm so there is enough reason to change and so they've got this incredible line of attack on the whole bunch of ization mockett and the the same as driving a lot of what is to create tools that application developers could use which you can accelerate that change but ultimately what is being sold and big being bought by companies and customers of doctor is an operation Center Solutions the Datacenter which is something that can replace will sit on top of a compliment to graduate this route to take your pick you know BMI vcenter what is the cheapest tension here because like you got darker this company and then Docker this open source tool that everybody is using and building their own platforms on and I don't know what you're saying cuz it's like how does this shape up and we haven't even talked about the CNC I thought you were part of the cloud made of computing Foundation which is this
 organization that is kind of crying trying to create Harmony in this space But as a as a member of the cncf how do you look at this tension between the fact that doctor is this technology that everybody is building on top of and yet simultaneously doctor is a business that probably has aspirations to own as much of the space as possible call them back to previous point about Komodo cheese and oil I think it's worth noting that what come out to see is used to describe many different things in the oil markets Community Based on price you know what the price is an international oil price set according to a number of benchmarks and then all the different kinds of the oil different ways of delivering against not come in price so you know you might pay more for example you have to ship the only love way too and she got to it well as in other markets in noticeably
 what you want to see zono fungible so you have things like different completely different types of Wheat and wheat Market said no couples to say the orange orange juice pockets and so you know we talked about food being a commodity a weeping a call to see about that she is not a commodity in the same sense that I always based on price so what does that mean for us in terms of computers and contain a simple machines I think when people talk about CPU doctors accept I could be a commodity similar to oil electricity and all the websites of Community Based on price on the question is only about what's the cost of deliberate and stock price of the physical Goods in the case of containers and applications I think you're going to see differentiation so you know don't come may be incredibly successful with solving a set in place of problems. Looks like the ones that they started out doing cuz that's the cool strength well as other players may be successful in other areas and I think whatever
 this is actually I'm include these Technologies in Lingerie Solutions which ultimately made play more into the hands of people who are capital rich like I'm as in Google or Microsoft and others like IBM and so on the cloud providers so that's why I think we'll know I don't come a looks like they wish to are never saying I think in realistic a few if you don't if you don't leadership dark around the tables prepare they will admit that you are like a peacock that going to look a lot bigger and more handsome than me but actually even if they got a you know significance of the snark you just being amazing one for them
 Joe is a member of the cncf and you have all these different big players that are involved in these technologies that cncf is stewarding over what is the role of the cncf what are you trying to do and how do you mediate the conversations between these different colors like between Google and Docker for example like how do you prevent acrimony and I don't know stalling in these communities or our what is the role of the cncf is an arbitrator there
 so the cncf could try to be an arbitrator between these different competing interests but actually isn't necessarily seeking to do. It's not trying to find areas where we disagree and focusing on those in order to see if we could not Shake Weight I seen that it's want to stab his but he does and I think no stops. Characterizes the oci do container initiative which is a genuine attempt to standardize definitions around container and permutation specs such that people could talk about a standard container
 the way that works is you you you go okay I do we all agree on the side of container that the definition of the answer is no we do not agree and then you say okay what are the areas we didn't agree let's fix those huh that's why you are you encouraged this agreement and then try to resolve it with the CNC app for note taking that approach or not trying to be a standard sporty or a king make her or insoluble trying to do is find areas where we all agree there are two technologies that people should be using in this new tribe native enviroments that we all are trying to engender so we Works cross Google mesosphere dr. Sisko I need the other joint now cool Samsung the other thing we agree on lots of things on a good example as the introduction of Canisius into the CNC are in a Prometheus is a monitoring tool which Olsen twin beds a Time series data body switches
 variables on lifx what a great tool it's designed for genomic climatic type environments it's designed originally within companies that sell SoundCloud that represent the type of Architecture is that, it was all about running some stuff Anonymous and stuff some stuff in house moving things around and sell them and say this is until which everybody in the rain would be useful to old customers no matter whether they using Docker kubernetes mess us we could be intercourse tectonic what have you an old some combination thereof and so it's actually really good to be able to send a strong signal to the market this is a technology this guy in cases that you can trust and you shouldn't be so confused because hair awesome things that we believe I actually will work well for you
 okay well Alexis I know we're up against time and I want to respect that time you have touched on a lot of different interesting things and for listeners who are more curious about Alexis positions on certain things there's a really good post on the new stack called the post Amazon challenge that you wrote Wichita touches on some of the things about where we are where we're going and what weaves position is in that space so Alexis thanks for coming on the show I'll put that in the show notes and yeah I hope you have you have you back on software engineering daily sometime in the future thank you very very much Jeff I really appreciate it
